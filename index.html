<!DOCTYPE html>
<html>
<body style="font-family:sans-serif">

<h2>Medical Diagnostic Centre</h2>

<h3>Patient Login</h3>
<input id="mobile" placeholder="Mobile">
<button onclick="loginPatient()">Login</button>

<h3>Book Appointment</h3>
<input id="reason" placeholder="Reason">
<button onclick="book()">Book</button>

<h3>My History</h3>
<button onclick="history()">Load</button>
<pre id="hist"></pre>

<hr>

<h3>Admin Login</h3>
<input id="adminPass" type="password">
<button onclick="loginAdmin()">Login</button>

<h3>Admin Dashboard</h3>
<button onclick="loadAll()">Load Appointments</button>
<pre id="all"></pre>

<h3>Analytics</h3>
<button onclick="analytics()">View</button>
<pre id="stats"></pre>

<script>
let token=null, adminToken=null;

function loginPatient(){
 fetch("/api/patient/login",{method:"POST",headers:{'Content-Type':'application/json'},
 body:JSON.stringify({mobile:mobile.value})})
 .then(r=>r.json()).then(d=>token=d.token);
}

function book(){
 fetch("/api/book",{method:"POST",
 headers:{'Content-Type':'application/json','Authorization':'Bearer '+token},
 body:JSON.stringify({reason:reason.value})});
}

function history(){
 fetch("/api/history",{headers:{Authorization:'Bearer '+token}})
 .then(r=>r.json()).then(d=>hist.innerText=JSON.stringify(d,null,2));
}

function loginAdmin(){
 fetch("/api/admin/login",{method:"POST",headers:{'Content-Type':'application/json'},
 body:JSON.stringify({password:adminPass.value})})
 .then(r=>r.json()).then(d=>adminToken=d.token);
}

function loadAll(){
 fetch("/api/admin/all",{headers:{Authorization:'Bearer '+adminToken}})
 .then(r=>r.json()).then(d=>all.innerText=JSON.stringify(d,null,2));
}

function analytics(){
 fetch("/api/admin/analytics",{headers:{Authorization:'Bearer '+adminToken}})
 .then(r=>r.json()).then(d=>stats.innerText=JSON.stringify(d,null,2));
}
</script>

</body>
</html>
