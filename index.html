<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Medical Diagnostic Centre – Online Consultation</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- UI / Icons -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<!-- Google API -->
<script src="https://apis.google.com/js/api.js"></script>

<!-- EmailJS -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<!-- Razorpay -->
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<style>
*{box-sizing:border-box}
body{margin:0;font-family:Inter;background:#f4f7fb}
header{background:#0b5ed7;color:#fff;padding:20px}
.container{max-width:1100px;margin:auto;padding:20px}
.card{background:#fff;padding:20px;border-radius:12px;margin-bottom:20px;box-shadow:0 10px 25px rgba(0,0,0,.05)}
h2,h3{margin-top:0}
input,select,button{
  width:100%;padding:12px;margin:6px 0;border-radius:8px;border:1px solid #ccc
}
button{background:#0b5ed7;color:#fff;font-weight:600;border:none;cursor:pointer}
button:hover{opacity:.9}
table{width:100%;border-collapse:collapse}
th,td{padding:10px;border-bottom:1px solid #eee}
.admin{border-left:5px solid #0b5ed7}
.hidden{display:none}
.badge{padding:5px 10px;border-radius:20px;font-size:12px}
.success{background:#d1e7dd}
.pending{background:#fff3cd}
</style>
</head>

<body>

<header>
  <h2>Medical Diagnostic Centre – Online Video Consultation</h2>
</header>

<div class="container">

<!-- PATIENT -->
<div class="card">
<h3>Book Online Consultation</h3>
<input id="pname" placeholder="Patient Name">
<input id="pemail" placeholder="Email">
<select id="doctor"></select>
<input type="date" id="date">
<input type="time" id="time">
<button onclick="payAndBook()">Pay & Book Consultation</button>
</div>

<!-- ADMIN -->
<div class="card admin">
<h3>Admin Login</h3>
<input id="adminUser" placeholder="Username">
<input id="adminPass" type="password" placeholder="Password">
<button onclick="loginAdmin()">Login</button>

<div id="adminArea" class="hidden">
<hr>
<h3>Add Doctor</h3>
<input id="dname" placeholder="Doctor Name">
<button onclick="addDoctor()">Add Doctor</button>

<h3>Appointments</h3>
<table id="apptTable"></table>
</div>
</div>

</div>

<script>
/* ================== CONFIG ================== */
const ADMIN_HASH = "e10adc3949ba59abbe56e057f20f883e"; // md5("123456")

const GOOGLE_CLIENT_ID = "26213355668-ss2uq0mq5mlorcjn47mekvq0m479fa6k.apps.googleusercontent.com";
const GOOGLE_API_KEY = "AIzaSyClLGXVFOWXZVDhbfsUJ0b53C7wiaA57BE";

emailjs.init("PASTE_EMAILJS_PUBLIC_KEY");

/* ================== DATA ================== */
let doctors = JSON.parse(localStorage.getItem("doctors")) || [];
let appointments = JSON.parse(localStorage.getItem("appointments")) || [];

/* ================== UTILS ================== */
function save(){
 localStorage.setItem("doctors",JSON.stringify(doctors));
 localStorage.setItem("appointments",JSON.stringify(appointments));
}

function md5(str){
 return CryptoJS.MD5(str).toString();
}

/* ================== RENDER ================== */
function renderDoctors(){
 const d=document.getElementById("doctor");
 d.innerHTML="";
 doctors.forEach(x=>{
  let o=document.createElement("option");
  o.textContent=x;
  d.appendChild(o);
 });
}

function renderAppointments(){
 const t=document.getElementById("apptTable");
 t.innerHTML="<tr><th>Patient</th><th>Doctor</th><th>Date</th><th>Meet</th></tr>";
 appointments.forEach(a=>{
  t.innerHTML+=`
  <tr>
   <td>${a.name}</td>
   <td>${a.doctor}</td>
   <td>${a.date} ${a.time}</td>
   <td>
     ${a.meet ? `<a href="${a.meet}" target="_blank">Join</a>` :
     `<button onclick="createMeet(${a.id})">Generate Meet</button>`}
   </td>
  </tr>`;
 });
}

/* ================== ADMIN ================== */
function loginAdmin(){
 if(md5(adminPass.value)===ADMIN_HASH){
  adminArea.classList.remove("hidden");
  renderAppointments();
 }else alert("Invalid credentials");
}

function addDoctor(){
 doctors.push(dname.value);
 save(); renderDoctors();
}

/* ================== PAYMENT ================== */
function payAndBook(){
 var options={
  key:"PASTE_RAZORPAY_KEY_ID",
  amount:50000,
  currency:"INR",
  name:"Medical Diagnostic Centre",
  description:"Online Consultation",
  handler:function(){
    bookAppointment();
  }
 };
 new Razorpay(options).open();
}

/* ================== BOOK ================== */
function bookAppointment(){
 const a={
  id:Date.now(),
  name:pname.value,
  email:pemail.value,
  doctor:doctor.value,
  date:date.value,
  time:time.value,
  meet:""
 };
 appointments.push(a);
 save();
 alert("Appointment booked. Admin will generate Meet link.");
}

/* ================== GOOGLE MEET ================== */
function createMeet(id){
 alert("Google OAuth required.\n\nAfter OAuth, Calendar API creates Meet link.");
}

/* ================== INIT ================== */
renderDoctors();
</script>

<!-- CryptoJS for password hashing -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

</body>
</html>
